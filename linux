most frequently used commands in realtime scenario
--------------------------------------------------
ssh -i <private-key> ec2-user@IP --- connect ec2 instance with ip address
ssh-keygen -f directory --- genrating key.

$ -> normal user
# -> root user
sudo su - -> I will land into root user home directory
sudo su -> land into same directory as root
pwd ----- present directory shows
mkdir ---- with help of this command we can create directory
cd ---- current directory
cd .. ---- come back to previos directory
ls ---- list of sub-directory
touch <filename> ------ to create file
cat > filename ----- enter content into file.
cat >> filename ---- content append when we use this command.
rm -f filename ----- deletes the file.
rmdir <directory name> ------ deletes directory.
rm -rf directoryname ----- recursively and forcefully delete the directory with files.
cp filename <destination path> ----- copy the file.
mv filename <destination path>  ---- move the file from source to destination.
mv <filename> <newfilename>or<destination path/newfilename>   ------ with help of mv command we can rename the file name also.
grep ---- with help of grep we can take input of second command from first command 
ex. cat linux.txt | grep -i "hello"
wget ----- we can download the content.
curl ----- it shows the content without downloading.

cut -d "/" -f1
ex. echo 'https://github.com/daws-86s/notes/blob/main/session-03.txt' | cut -d "/" -f8
output: https

awk -F "/" '{print $1F}'
ex. echo 'https://github.com/daws-86s/notes/blob/main/session-03.txt' | awk -F "/" '{print $1F}'
output: https.
---------------------------------------------------------------------------------------------------

vim file
---------
vim <file-name>
1. if file already exists, it will open
2. if file does not exists, then it will create and open
Default mode is esc mode.

Colon/Command Mode
=================
:wq -> write and quit
:q! -> quit without saving
:q -> just quit
:set nu -> display line numbers
:<line-number> -> cursor will go that line
:/<word-to-search> -> search from top
:?<word-to-search> -> search from bottom
:<line-number>d -> deletes that line
:noh -> no highlight
:28s/root/ROOT -> line number 28, replace root with ROOT. It replaces the first occurence in that line

:29s/root/ROOT/g -> g for global. means 29th line all root occurences should be replaced with ROOT

:%s/root/ROOT/g -> all lines all occurences in the file

Esc Mode
============
gg --> takes us to top of the file
shift+g -> takes us to bottom of the file
u -> undo
ctrl+r -> redo
dd -> deletes the line
yy(yank) -> copies the line
p -> paste below the line
shift+p -> paste above the line

head <file-name> -> displays top 10 lines of the file
tail <file-name> -> displays bottom 10 lines

head -n 8 | tail -n 3

55-65

head -n 65 | tail -n 11

Linux Administration
======================
User Management

User Groups Roles Permissions

User -> A human
Group -> A team of humans
Roles -> position
Permissions -> Access to the roles

1. create user
2. create group
3. add user to the group
4. remove user from the group
5. remove user
6. remove group

1. create devops group
2. create gopi user
3. add gopi to devops group
4. remove gopi from devops group
5. remove gopi user

useradd gopi -> creates gopi user
groupadd devops -> creaes devops group

id <user-name>
id gopi
uid=1001(gopi) gid=1001(gopi) groups=1001(gopi)

when you create user in Linux, by default it will create one group with same username

/etc/passwd
gopi:x:1001:1001::/home/gopi:/bin/bash

/etc/group
devops:x:1002:

/etc/shadow -> encrypted password

A user in Linux must have 1 primary group and atleast 1 secondary group

usermod -g <group-name> <user-name> --> adding gopi to devops group
usermod -aG <group-name> <user-name> --> adding gopi to secondary group

passwd <user-name>

/etc/ssh/sshd_config --> SSH configuration

PasswordAuthentication no

vim /etc/ssh/sshd_config
sshd -t -> checks the syntax of ssh

systemctl restart sshd

gpasswd -d <user-name> <group-name>

id gopi
gopi gopi gopi

files and permissions
=====================
Read    -> 4
Write   -> 2
Execute -> 1

-	rw-			r--		r--
	owner/user	group	others
	u			   g		o
	
chmod g+w 
chmod 744

File Ownership
================
chmod -> either the owner of the file or root
chown <user>:<group> file/folder --> not even owner can change the ownership, only root user

chown -R -> recursive. all files and folders inside

How a user can login with keys
==============================

An employee should generate keys..

ssh-keygen -f gopi
gopi.pub
gopi -> private key

gopi should send his public key to admins

1. useradd gopi
2. admin should create .ssh folder in /home/gopi
3. permissions should be 700 for .ssh means only owner has full access
4. .ssh ownership should be only gopi including group
5. create authorized_keys inside .ssh with max permissions 600 and again ownership should be gopi
6. keep the public file from gopi inside authorized_keys

ssh -i gopi gopi@3.87.244.153

/etc/sudoers -> sudoers information
vimsudo -> edit safely with syntax checks

How to give sudo access to user?

add him to wheel group and then modify /etc/sudoers wheel group without password

usermod -aG wheel gopi
/etc/sudoers ->


Package management
===================
package managers

dnf is the command to install/remove the packages from server
previously called as yum

RHEL => dnf install <package-name>
Ubuntu => apt-get install <package-name>

/etc/yum.repos.d

dnf list installed -> already installed in server
dnf list available -> not installed but available in web repos

install remove update info

Service Management
==================
nginx -> http web server
systemctl start nginx
systemctl status nginx

http://3.87.244.153:80

systemctl stop nginx
systemctl restart nginx

systemctl enable nginx -> whenever system restarted automatically this nginx will run
systemctl disable nginx
